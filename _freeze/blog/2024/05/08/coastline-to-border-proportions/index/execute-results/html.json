{
  "hash": "ecb0eaa0935332bb2024cebf4505a045",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Calculating the proportion of US state borders that are coastlines\"\ndate: 2024-05-08\ndescription: \"Measuring coastlines is hard and causes fractal paradoxes, but we can use R and {sf} to try!\"\nimage: \"index_files/figure-html/plot-nc-census-coastal-borders-1.png\"\ntwitter-card:\n  image: \"index_files/figure-html/plot-nc-census-coastal-borders-1.png\"\nopen-graph:\n  image: \"index_files/figure-html/plot-nc-census-coastal-borders-1.png\"\ncategories:\n  - r\n  - tidyverse\n  - ggplot\n  - gis\n  - maps\nformat:\n  html: \n    shift-heading-level-by: 1\n    include-in-header:\n      - text: |\n          <style type=\"text/css\">\n          hr.dinkus {\n              width: 50px;\n              margin: 2em auto 2em;\n              border-top: 5px dotted #454545;\n          }\n          \n          div.column-margin+hr.dinkus {\n              margin: 1em auto 2em;\n          }\n          </style>\ndoi: 10.59350/wzn5q-wxk02\ncitation: true\n---\n\n\n\n\n\nA few days ago, my wife, a bunch of my kids, and I were huddled around a big wall map of the United States, joking about the relative unimportance of [Rhode Island](https://en.wikipedia.org/wiki/Rhode_Island), the smallest state in the US. It's [one of the states I never ever think about](https://twitter.com/andrewheiss/status/1258088903543853059):\n\n![Tweet by me from [May 6, 2020](https://twitter.com/andrewheiss/status/1258088903543853059)](img/ignored-states-tweet.png){width=70%}\n\n…and it's just so *small*.\n\nAmid the joking, my wife came to Rhode Island's defense by declaring that even though it's so small, it has one of the highest proportions of coastline to land borders. We all gave it a metaphorical gold star for being so maritime-y and moved on with our days.\n\nBut as I thought about it later, I got curious about how much of Rhode Island's border really is coastline and how that proportion compares to other states. New England in general has lots of inlets and islands; North Carolina has the complex [Outer Banks](https://en.wikipedia.org/wiki/Outer_Banks); Louisiana has the Mississippi Delta; Michigan is split into two parts and surrounded by the Great Lakes; Florida is Florida. Lots of other states have lots of coastline.\n\nUsing R, the [extremely powerful {sf} package](https://r-spatial.github.io/sf/) for working with geospatial data, and some high quality public domain geographic data, we can find the actual answers about coastline proportions. Spoilers: Rhode Island does really well, as expected.\n\nBut doing this is a lot more complicated than you might think, both for technical reasons and for philosophical reasons.\n\nLet's explore this data and make some pretty maps!\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tigris)\nlibrary(sf)\nlibrary(rnaturalearth)\nlibrary(patchwork)\nlibrary(gt)\n\nclrs <- rcartocolor::carto_pal(12, \"Prism\")\nclr_ocean <- colorspace::lighten(\"#88CCEE\", 0.7)\n\n# Custom ggplot theme to make pretty plots\n# Get the font at https://fonts.google.com/specimen/Overpass\ntheme_map <- function() {\n  theme_void(base_family = \"Overpass Light\") +\n    theme(\n      plot.title = element_text(family = \"Overpass\", face = \"bold\", hjust = 0.5),\n      plot.subtitle = element_text(family = \"Overpass\", face = \"plain\", hjust = 0.5)\n    )\n}\n\nupdate_geom_defaults(\"text\", list(family = \"Overpass\"))\n```\n:::\n\n\n\n\n# Use US Census data on states and coastlines\n\nAt first glance, calculating the proportion of coastline borders in states feels fairly straightforward. We take state boundaries, find where they intersect with coastline boundaries, extract those overlapping sections, and voilá—we're done.\n\nThe US Census Bureau even has shapefiles ready to use, like [US state borders](https://www.census.gov/geographies/mapping-files/time-series/geo/cartographic-boundary.html) and [the national coastline](https://catalog.data.gov/dataset/tiger-line-shapefile-2023-nation-u-s-coastline) for 2023, and [the {tigris} package](https://walker-data.com/census-r/census-geographic-data-and-applications-in-r.html) makes it really easy to load that data directly into R.\n\nFirst, let's grab US state data at medium resolution (1:5 million) and calculate the length of each state's border. To make calculations easier, we'll change the projection to [Albers](https://en.wikipedia.org/wiki/Albers_projection), which measures distances in meters instead of the default [NAD 83 decimal degree system](https://en.wikipedia.org/wiki/North_American_Datum).\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncensus_states <- states(\n  cb = TRUE, resolution = \"5m\", year = 2023,\n  progress_bar = FALSE, keep_zipped_shapefile = TRUE\n) |>\n  st_transform(crs = st_crs(\"ESRI:102003\")) |>  # Albers\n  mutate(\n    border_length = st_perimeter(geometry),\n    border_length_miles = units::set_units(border_length, \"miles\")\n  )\n\ncensus_states |> \n  select(NAME, border_length, border_length_miles)\n## Simple feature collection with 56 features and 3 fields\n## Geometry type: MULTIPOLYGON\n## Dimension:     XY\n## Bounding box:  xmin: -10430000 ymin: -1685000 xmax: 3408000 ymax: 5141000\n## Projected CRS: USA_Contiguous_Albers_Equal_Area_Conic\n## First 10 features:\n##            NAME border_length border_length_miles                       geometry\n## 1    New Mexico   2389194 [m]      1484.6 [miles] MULTIPOLYGON (((-1231344 -5...\n## 2   Puerto Rico    683648 [m]       424.8 [miles] MULTIPOLYGON (((3306526 -15...\n## 3         Texas   6218137 [m]      3863.8 [miles] MULTIPOLYGON (((-1e+06 -570...\n## 4      Kentucky   2097216 [m]      1303.1 [miles] MULTIPOLYGON (((584560 -886...\n## 5          Ohio   1614692 [m]      1003.3 [miles] MULTIPOLYGON (((1094061 536...\n## 6       Georgia   1950980 [m]      1212.3 [miles] MULTIPOLYGON (((939223 -230...\n## 7      Arkansas   2117255 [m]      1315.6 [miles] MULTIPOLYGON (((122656 -111...\n## 8        Oregon   2301152 [m]      1429.9 [miles] MULTIPOLYGON (((-2285910 94...\n## 9  Pennsylvania   1579842 [m]       981.7 [miles] MULTIPOLYGON (((1287712 486...\n## 10     Missouri   2357068 [m]      1464.6 [miles] MULTIPOLYGON (((19009 34499...\n```\n:::\n\n\n\nNext we'll grab coastline data and also convert it to the meter-based Albers projection:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncensus_coastline <- coastline(\n  year = 2023, progress_bar = FALSE, keep_zipped_shapefile = TRUE\n) |>\n  st_transform(crs = st_crs(\"ESRI:102003\"))\ncensus_coastline\n## Simple feature collection with 4236 features and 2 fields\n## Geometry type: LINESTRING\n## Dimension:     XY\n## Bounding box:  xmin: -10430000 ymin: -1685000 xmax: 3408000 ymax: 5140000\n## Projected CRS: USA_Contiguous_Albers_Equal_Area_Conic\n## First 10 features:\n##         NAME MTFCC                       geometry\n## 1  Atlántico L4150 LINESTRING (3232962 -158263...\n## 2  Atlántico L4150 LINESTRING (3282570 -157424...\n## 3  Atlántico L4150 LINESTRING (3278311 -157345...\n## 4  Atlántico L4150 LINESTRING (3283967 -157426...\n## 5  Atlántico L4150 LINESTRING (3282914 -157442...\n## 6  Atlántico L4150 LINESTRING (3282240 -157431...\n## 7  Atlántico L4150 LINESTRING (3280919 -157406...\n## 8  Atlántico L4150 LINESTRING (3276748 -157350...\n## 9  Atlántico L4150 LINESTRING (3276791 -157363...\n## 10 Atlántico L4150 LINESTRING (3286366 -157464...\n```\n:::\n\n\n\nThis coastline data isn't state-based—instead, each row represents a segment of the US coastline. Here's what it looks like when plotted:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot() + \n  geom_sf(data = census_coastline, linewidth = 0.1) +\n  labs(title = \"US Census coastline data\") +\n  coord_sf(crs = st_crs(\"ESRI:102003\")) +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-census-coastline-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nTo find where the two maps intersect, we can use `st_intersection()`, and then we can calculate the length of each combined segment with `st_length()`:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncensus_combined <- census_states |> \n  st_intersection(census_coastline) |> \n  mutate(coastline_length = st_length(geometry))\n  \ncensus_combined |> \n  select(NAME, border_length, coastline_length, geometry)\n## Simple feature collection with 1276 features and 3 fields\n## Geometry type: GEOMETRY\n## Dimension:     XY\n## Bounding box:  xmin: -10430000 ymin: -1685000 xmax: 3408000 ymax: 5140000\n## Projected CRS: USA_Contiguous_Albers_Equal_Area_Conic\n## First 10 features:\n##            NAME border_length coastline_length                       geometry\n## 2   Puerto Rico    683648 [m]      119.450 [m] LINESTRING (3282570 -157424...\n## 2.1 Puerto Rico    683648 [m]       12.122 [m] LINESTRING (3282914 -157442...\n## 2.2 Puerto Rico    683648 [m]      722.088 [m] LINESTRING (3282240 -157431...\n## 2.3 Puerto Rico    683648 [m]        5.332 [m] LINESTRING (3280919 -157406...\n## 2.4 Puerto Rico    683648 [m]     2014.901 [m] LINESTRING (3279028 -157391...\n## 2.5 Puerto Rico    683648 [m]     2446.737 [m] LINESTRING (3081263 -163791...\n## 2.6 Puerto Rico    683648 [m]    12209.219 [m] MULTILINESTRING ((3306976 -...\n## 2.7 Puerto Rico    683648 [m]     2804.085 [m] MULTILINESTRING ((3178034 -...\n## 2.8 Puerto Rico    683648 [m]     7978.399 [m] MULTILINESTRING ((3230856 -...\n## 2.9 Puerto Rico    683648 [m]     6004.139 [m] MULTILINESTRING ((3172336 -...\n```\n:::\n\n\n\nSome of these segments are thousands of miles; some are only a few miles. We can do some grouping and summarizing to collapse these into single values for each state. `border_length` is a state-level variable, not a border-segment-level variable, so it's repeated in each of the rows of the combined dataset, so we only need to keep one of the values---here I keep the max, but min would work (since they're the same).\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncoastline_length_by_state <- census_combined |> \n  st_drop_geometry() |>  # Stop worrying about geographic stuff\n  group_by(NAME) |> \n  summarize(\n    total_coastline_length = sum(coastline_length),\n    total_perimeter = max(border_length),\n    prop_coastline = as.numeric(total_coastline_length / total_perimeter)\n  )\ncoastline_length_by_state\n## # A tibble: 35 × 4\n##    NAME                                         total_coastline_length total_perimeter prop_coastline\n##    <chr>                                                           [m]             [m]          <dbl>\n##  1 Alabama                                                     192355.        1907670.         0.101 \n##  2 Alaska                                                    19223761.       29671399.         0.648 \n##  3 American Samoa                                              175827.         172059.         1.02  \n##  4 California                                                 1129738.        4191420.         0.270 \n##  5 Commonwealth of the Northern Mariana Islands                261865.         327378.         0.800 \n##  6 Connecticut                                                  77127.         574613.         0.134 \n##  7 Delaware                                                    110370.         433573.         0.255 \n##  8 Florida                                                    1842297.        3795469.         0.485 \n##  9 Georgia                                                     114280.        1950980.         0.0586\n## 10 Guam                                                        120734.         133668.         0.903 \n## # ℹ 25 more rows\n```\n:::\n\n\n\nAt first glance, this looks fine. We have each state's total border length, coastline length, and a proportion. Neat.\n\nBut some of these proportions look wrong, like Hawaiʻi:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncoastline_length_by_state |> \n  filter(NAME %in% c(\"Hawaii\", \"North Carolina\"))\n## # A tibble: 2 × 4\n##   NAME           total_coastline_length total_perimeter prop_coastline\n##   <chr>                             [m]             [m]          <dbl>\n## 1 Hawaii                        712716.        1413312.         0.504 \n## 2 North Carolina                248590.        3498277.         0.0711\n```\n:::\n\n\n\nAccording to this, only 50% of Hawaiʻi's borders are on the coast. That's obviously wrong—that state shares no borders with other states and it's in the middle of the Pacific Ocean.\n\nIf we plot the two datasets, we can see what's going on. First, the resolutions of the state data and coastline data don't quite match. Check out Oʻahu here—the purple coastline crosses some bays and misses some of the landmass:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Extract the state boundaries\ncensus_hi <- census_states |> filter(NAME == \"Hawaii\")\n\n# Extract the bounding box around the state so we can zoom in on the coastline map\nbbox_hi <- census_hi |> st_transform(st_crs(\"EPSG:4269\")) |> st_bbox()\n\nggplot() +\n  geom_sf(data = census_hi, linewidth = 0.1, fill = clrs[5]) +\n  geom_sf(data = census_coastline, aes(color = \"US Census coastline data\")) +\n  annotate(geom = \"text\", x = I(0.425), y = I(0.89), label = \"Oʻahu\") +\n  annotate(\n    geom = \"rect\", \n    xmin = I(0.35), xmax = I(0.5), ymin = I(0.63), ymax = I(0.85), \n    color = clrs[12], fill = NA, linetype = \"21\"\n  ) +\n  scale_color_manual(values = c(clrs[11])) +\n  labs(title = \"Hawaiʻi\", color = NULL)  +\n  coord_sf(\n    xlim = bbox_hi[c(1, 3)],\n    ylim = bbox_hi[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map() +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-hi-mismatch-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nThis mismatch between datasets is even more obvious if we look at a state like North Carolina. The actual landmass in the Outer Banks along the east coast is complex, with all sorts of inlets and a big long barrier island, but the Census simplifies it down substantially (with good reason(!) [as we'll see later](#the-coastline-paradox-and-map-resolutions)):\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncensus_nc <- census_states |> filter(NAME == \"North Carolina\")\nbbox_nc <- census_nc |> st_transform(st_crs(\"EPSG:4269\")) |> st_bbox()\n\nggplot() +\n  geom_sf(data = census_nc, linewidth = 0.1, fill = clrs[6]) +\n  geom_sf(data = census_coastline, aes(color = \"US Census coastline data\")) +\n  annotate(\n    geom = \"rect\", \n    xmin = I(0.57), xmax = I(0.97), ymin = I(0.005), ymax = I(0.995), \n    color = clrs[12], fill = NA, linetype = \"21\"\n  ) +\n  scale_color_manual(values = c(clrs[11])) +\n  labs(title = \"North Carolina\", color = NULL)  +\n  coord_sf(\n    xlim = bbox_nc[c(1, 3)],\n    ylim = bbox_nc[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map() +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-nc-mismatch-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nThis mismatch in borders and coastlines matter a lot for calculations. We're using `st_intersection()` to find where the two maps overlap. If the two maps are misaligned, we can't identify the correct overlaps, which means we can't identify the full coastal border. Remember how we calculated that only 50% of Hawaiʻi's borders are coastlines? If we plot the coastal borders of Hawaiʻi, we can see why:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = census_combined, linewidth = 0.2) +\n  labs(title = \"Incomplete coastline overlaps in Hawaiʻi\") +\n  coord_sf(\n    xlim = bbox_hi[c(1, 3)],\n    ylim = bbox_hi[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-hi-mismatch-borders-only-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nThere are a couple issues here. The dots scattered along the borders are a sign that there's some misalignment between the two maps. The borders for the states sometimes cross the coastline borders in a single point instead of following the coast exactly. But the even bigger issue is that these coastlines look sketched out—there are so many major gaps that roughly 50% of the borders are missing. That's again because of misalignment with the two maps. The borders don't overlap exactly, so `st_intersection()` can't pick them up.\n\n\n\n```{=html}\n<hr class=\"dinkus\">\n```\n\n\n\nSo what do we do? We could try finding different coastline data that matches the same resolution as the Census data. The [National Oceanic and Atmospheric Administration (NOAA)](https://www.ngdc.noaa.gov/mgg/shorelines/) and the [US Geological Survey (USGS)](https://www.sciencebase.gov/catalog/item/581d051de4b08da350d523be) each have their own shoreline datasets, and we could download those and load them into R and hope that they align with one of the Census's state maps. But they don't.\n\nSo we give up.\n\n\n# Use the lack of land as the coastline\n\nJust kidding. There's a better solution.\n\nWe already kind of have coastline data embedded in the state map data. For states that border an ocean or lake, anywhere the blue of the water touches the land is technically a coastline. Take Hawaiʻi, for instance, where the whole state border is the coastline:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = census_hi, linewidth = 0.1, fill = clrs[5]) +\n  labs(title = \"The islands of Hawaiʻi\") +\n  coord_sf(crs = st_crs(\"EPSG:4269\")) +  # NAD83\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean), \n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0))\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-hi-census-ocean-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nWhen looking at states with interior borders (like the other 49 states), though, the state map data has no way to distinguish which of those borders touch the ocean or touch other states. The east coast of North Carolina touches the ocean, but the northern, southern, and western borders do not. We need to somehow figure out which borders don't touch other states.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = census_nc, linewidth = 0.1, fill = clrs[6]) +\n  annotate(geom = \"text\", x = I(0.6), y = I(0.89), label = \"↑ Virginia ↑\") +\n  annotate(geom = \"text\", x = I(0.58), y = I(0.3), label = \"↓ South Carolina ↓\", angle = 313) +\n  annotate(geom = \"text\", x = I(0.14), y = I(0.5), label = \"↓ Georgia\") +\n  annotate(geom = \"text\", x = I(0.27), y = I(0.64), label = \"← Tennessee\") +\n  labs(title = \"The “island” of North Carolina\") +\n  coord_sf(crs = st_crs(\"EPSG:4269\")) +  # NAD83\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean), \n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0))\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-nc-census-ocean-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nWe *do* have data about Virginia, South Carolina, Tennessee, and Georgia, though, so there is a way to know that those borders aren't ocean borders.\n\nOne way to determine which borders are interior and which ones are coastal is to create a big unified shape of the United States and then use the shape of North Carolina as a kind of cookie cutter. We can assume that any exposed edges are coasts.\n\nFirst, we'll make our big unified country shape:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncensus_us_giant <- census_states |> \n  st_union() |> \n  st_transform(crs = st_crs(\"ESRI:102003\"))\n\nggplot() + \n  geom_sf(data = census_us_giant, linewidth = 0, fill = clrs[1]) +\n  labs(title = \"One big US-shaped shape\") +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean), \n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0))\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-us-census-giant-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nBefore trying this with North Carolina, we'll test the cookie cutter selection with Hawaiʻi, since we know that 100% of its borders are coastlines. If we use the Hawaiʻi shape to take a chunk out of the overall US shape, we get…\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhi_ocean_border_census <- census_hi |> \n  st_difference(census_us_giant)\n\nggplot() +\n  geom_sf(data = hi_ocean_border_census) +\n  labs(title = \"lol nothing\") +\n  theme_map() +\n  theme(\n    panel.border = element_rect(color = \"black\", fill = clr_ocean),\n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0))\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-hi-empty-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\n…nothing.\n\nThe state cookie cutter was too perfect and selected right up to the edge of the overall country, leaving nothing.\n\nTo fix this, we can expand the state shape just a *tiiiiiiny* bit. We can use `st_buffer()` to add a tiny amount of distance all around the shape—since we're using the Albers projection, we're working in meters, so let's add just 1 millimeter around the border before finding the difference:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhi_ocean_border_census <- census_hi |> \n  st_buffer(dist = 0.001) |> \n  st_difference(census_us_giant)\n\nggplot() +\n  geom_sf(data = hi_ocean_border_census, linewidth = 0.2) +\n  labs(title = \"Hawaiʻi’s coastal borders extracted from US shape\") +\n  coord_sf(\n    xlim = bbox_hi[c(1, 3)],\n    ylim = bbox_hi[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-hi-census-borders-extracted-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nPerfect.\n\nWell, almost perfect. We've identified the coastal borders, but adding the buffer actually distorts things when we calculate the length of the border.\n\nLet's find the coast-to-border proportion for Hawaiʻi, which should be 100%. First we'll find the perimeter of the state:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhi_border_perimeter <- census_hi |> \n  st_perimeter()\nhi_border_perimeter\n## 1413312 [m]\nunits::set_units(hi_border_perimeter, \"miles\")\n## 878.2 [miles]\n```\n:::\n\n\n\nHawaiʻi's border is 1,413,312 meters, or 878 miles. Sounds reasonable.\n\nNext we'll find the perimeter of the coastline:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhi_ocean_border_perimeter <- hi_ocean_border_census |> \n  st_perimeter()\nhi_ocean_border_perimeter\n## 2826623 [m]\nunits::set_units(hi_ocean_border_perimeter, \"miles\")\n## 1756 [miles]\n```\n:::\n\n\n\nHrm. Hawaiʻi's coastline is 2,826,623 meters, or 1,756 miles. That's actually exactly twice the correct border length:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nas.numeric(hi_ocean_border_perimeter / hi_border_perimeter)\n## [1] 2\n```\n:::\n\n\n\nThis happened because of the 1 mm buffer that we added around the state shape. Adding the buffer transformed the line into a polygon—a super tiny 1 mm-narrow polygon, but a polygon nonetheless. That means the border technically has a top and sides and a bottom. When calculating the length or perimeter of the border, we're double counting because we're getting both the top and the bottom of the hyper-thin polygon.\n\nTo better illustrate what's going on, let's add a three kilometer buffer around the borders.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhi_ocean_border_census_huge_buffer <- census_hi |> \n  st_buffer(dist = 3000) |> \n  st_difference(census_us_giant)\n\nggplot() +\n  geom_sf(\n    data = hi_ocean_border_census_huge_buffer, \n    linewidth = 0.2, fill = colorspace::lighten(clrs[5], 0.5)\n  ) +\n  labs(title = \"Hawaiʻi’s borders with a 3 km buffer\") +\n  coord_sf(\n    xlim = bbox_hi[c(1, 3)],\n    ylim = bbox_hi[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-hi-census-thick-buffer-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nCalculating the perimeter of these borders will add the inside ring and the outside ring, effectively doubling the distance.\n\nIt's less obvious that this doubling is happening when we add just 1 mm, but it is, and it's leading to incorrect calculations. Fortunately it's easy to adjust—we can halve the ocean border distance. Coastal borders comprise 100% of Hawaiʻi's state borders, as expected:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nas.numeric((hi_ocean_border_perimeter / 2) / hi_border_perimeter) |> \n  scales::label_percent()()\n## [1] \"100%\"\n```\n:::\n\n```{=html}\n<hr class=\"dinkus\">\n```\n\n\n\nLet's do the same thing with North Carolina:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nnc_ocean_border_census <- census_nc |> \n  st_buffer(dist = 0.001) |> \n  st_difference(census_us_giant)\n\nggplot() +\n  geom_sf(data = nc_ocean_border_census, linewidth = 0.2) +\n  labs(title = \"North Carolina’s coastal borders extracted from US shape\") +\n  coord_sf(crs = st_crs(\"EPSG:4269\")) +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-nc-census-borders-extracted-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nPerfect! Those are all the state borders that don't touch other states. *That's* the coastline.\n\nWe can visualize this better by plotting the larger country shape, the North Carolina shape, and the coastal border:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = census_us_giant, fill = clrs[1], alpha = 0.4) +\n  geom_sf(data = census_nc, linewidth = 0.1, fill = clrs[6]) +\n  geom_sf(\n    data = nc_ocean_border_census, linewidth = 0.4, \n    aes(color = \"Coastal border extracted from US shape\"),\n    key_glyph = draw_key_path\n  ) +\n  annotate(geom = \"text\", x = I(0.6), y = I(0.89), label = \"↑ Virginia ↑\") +\n  annotate(geom = \"text\", x = I(0.58), y = I(0.3), label = \"↓ South Carolina ↓\", angle = 313) +\n  annotate(geom = \"text\", x = I(0.14), y = I(0.5), label = \"↓ Georgia\") +\n  annotate(geom = \"text\", x = I(0.27), y = I(0.64), label = \"← Tennessee\") +\n  scale_color_manual(values = c(clrs[8])) +\n  labs(title = \"North Carolina and its coastal border\", color = NULL) +\n  coord_sf(\n    xlim = bbox_nc[c(1, 3)],\n    ylim = bbox_nc[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean),\n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0)),\n    legend.key.height = unit(0.5, \"lines\"),\n    legend.key = element_rect(fill = NA, color = NA),\n    legend.position = \"top\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-nc-census-coastal-borders-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nAnd we can find the proportion of the state's borders that are coastline:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nnc_border_perimeter <- census_nc |> \n  st_perimeter()\nnc_border_perimeter\n## 3498277 [m]\nunits::set_units(nc_border_perimeter, \"miles\")\n## 2174 [miles]\n\nnc_ocean_border_perimeter <- nc_ocean_border_census |> \n  st_perimeter()\nnc_ocean_border_perimeter / 2\n## 1930852 [m]\nunits::set_units(nc_ocean_border_perimeter / 2, \"miles\")\n## 1200 [miles]\n\nas.numeric((nc_ocean_border_perimeter / 2) / nc_border_perimeter) |> \n  scales::label_percent()()\n## [1] \"55%\"\n```\n:::\n\n\n\nThis approach is great. We don't need to worry about making sure the coastline map matches the resolution of the state map, since we're using just one map. Everything aligns perfectly automatically.\n\n\n\n```{=html}\n<hr class=\"dinkus\">\n```\n\n\n\nBUT there's one more wrinkle to worry about. This approach gets trickier with states that touch other countries, like Washington, where the western border touches the ocean, the northern border touches Canada, and the eastern and southern borders touch other states. The state data knows about Idaho and Oregon, but it doesn't know that Canada is there. Washington looks like it has an exterior, ocean-facing western border—Canada is replaced with an ocean.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncensus_wa <- census_states |> filter(NAME == \"Washington\")\nbbox_wa <- census_wa |> st_transform(st_crs(\"EPSG:4269\")) |> st_bbox()\n\nwa_ocean_border_census <- census_wa |> \n  st_buffer(dist = 0.001) |> \n  st_difference(census_us_giant)\n\nggplot() +\n  geom_sf(data = census_us_giant, fill = clrs[1], alpha = 0.4) +\n  geom_sf(data = census_wa, linewidth = 0.1, fill = clrs[3]) +\n  geom_sf(\n    data = wa_ocean_border_census, linewidth = 0.4, \n    aes(color = \"Coastal border extracted from US shape\"),\n    key_glyph = draw_key_path\n  ) +\n  annotate(geom = \"text\", x = I(0.64), y = I(0.91), label = \"↑ Canada (British Columbia) ↑\") +\n  annotate(geom = \"text\", x = I(0.54), y = I(0.18), label = \"↓ Oregon ↓\") +\n  annotate(geom = \"text\", x = I(0.87), y = I(0.5), label = \"Idaho →\") +\n  scale_color_manual(values = c(clrs[8])) +\n  labs(title = \"Washington and the fake Canadian ocean\", color = NULL) +\n  coord_sf(\n    xlim = bbox_wa[c(1, 3)],\n    ylim = bbox_wa[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean),\n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0)),\n    legend.key.height = unit(0.5, \"lines\"),\n    legend.key = element_rect(fill = NA, color = NA),\n    legend.position = \"top\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-wa-census-borders-extracted-wrong-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nThe big US-shaped polygon isn't big enough for identifying land borders in other countries. In order to identify *all* the ocean-facing state borders, we need data about Canada and Mexico, and the US Census doesn't provide that.\n\nSo we give up.\n\n\n# Use data from Natural Earth\n\nJust kidding. There's a better solution.\n\nThe Census doesn't have data on other countries, but other data sources do! The [incredible Natural Earth project](https://www.naturalearthdata.com/) has a ton of shapefiles for the entire world, both [physical](https://www.naturalearthdata.com/downloads/10m-physical-vectors/) (i.e. rivers, coastlines, etc.) and [cultural](https://www.naturalearthdata.com/downloads/10m-cultural-vectors/), like borders for countries (what it calls `Admin-0`) and states/provinces (what it calls `Admin-1`). It offers three levels of resolution: 1:10 million (high resolution), 1:50 million (medium resolution), and 1:110 million (low resolution).\n\nPlus, like {tigris}, [the {rnaturalearth} package](https://ropensci.github.io/rnaturalearth/) makes it really easy to load that data directly into R.\n\nLet's follow the same process for Hawaiʻi, North Carolina, and Washington using Natural Earth data instead of Census data.\n\nFirst, we'll grab high resolution (1:10 million) maps from the `Admin-1` (states and provinces) data:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nif (!file.exists(\"ne_data/ne_10m_admin_1_states_provinces_lakes.shp\")) {\n  ne_download(\n    type = \"admin_1_states_provinces_lakes\", \n    scale = 10,\n    destdir = \"ne_data\",\n    load = FALSE\n  )\n} \n\nstates_provinces <- ne_load(\n  type = \"admin_1_states_provinces_lakes\", \n  scale = 10,\n  destdir = \"ne_data\"\n)\n```\n:::\n\n\n\nWe only need to work with three countries, not the entire world, so we'll filter it down to just North America before joining everything into a single shape with `st_union()`:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nna_giant <- states_provinces |> \n  filter(admin %in% c(\"United States of America\", \"Canada\", \"Mexico\")) |> \n  st_union() |> \n  st_transform(crs = st_crs(\"ESRI:102003\"))  # Convert to Albers for meters\n\nggplot() + \n  geom_sf(data = na_giant, linewidth = 0, fill = clrs[10]) +\n  labs(title = \"One big North America-shaped shape\") +\n  coord_sf(crs = st_crs(\"ESRI:102003\")) +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean), \n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0))\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-ne10-giant-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\n(That's so pretty.)\n\nNext, we'll extract all the US states from the Natural Earth data, since we want this big North American shape to match the states exactly:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nne_states <- states_provinces |> \n  filter(admin == \"United States of America\") |> \n  st_transform(crs = st_crs(\"ESRI:102003\"))\n\nggplot() + \n  geom_sf(data = na_giant, linewidth = 0, fill = clrs[10]) +\n  geom_sf(data = ne_states, linewidth = 0.05, fill = clrs[8], color = \"white\") +\n  labs(title = \"The United States overlaid on North America\") +\n  coord_sf(crs = st_crs(\"ESRI:102003\")) +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean), \n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0))\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-ne10-giant-with-states-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nNow we'll go through the same process as before, using state shapes as cookie cutters from the larger North American shape and extracting non-interior borders. \n\n## Hawaiʻi\n\nHere are Hawaiʻi's extracted borders—because we're working with high resolution data, we get a lot more detail, including all the [Northwestern Hawaiian Islands](https://en.wikipedia.org/wiki/Northwestern_Hawaiian_Islands):\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nne_hi <- ne_states |> filter(name == \"Hawaii\")\nbbox_ne_hi <- ne_hi |> st_transform(st_crs(\"EPSG:4269\")) |> st_bbox()\n\nhi_ocean_border_ne <- ne_hi |> \n  st_buffer(dist = 0.001) |> \n  st_difference(na_giant)\n\nggplot() +\n  geom_sf(data = hi_ocean_border_ne, linewidth = 0.2) +\n  labs(title = \"Hawaiʻi’s coastal borders extracted from North America shape\") +\n  coord_sf(\n    xlim = bbox_ne_hi[c(1, 3)],\n    ylim = bbox_ne_hi[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-hi-ne-borders-extracted-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nAs before, we can calculate the perimeter of the state, the perimeter of the coastline, and find the proportion. It's 100%, as expected:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# State border\nhi_border_perimeter_ne <- ne_hi |> \n  st_perimeter()\nhi_border_perimeter_ne\n## 1458906 [m]\nunits::set_units(hi_border_perimeter_ne, \"miles\")\n## 906.5 [miles]\n\n# Coastal border\nhi_ocean_border_perimeter_ne <- hi_ocean_border_ne |> \n  st_perimeter()\nhi_ocean_border_perimeter_ne / 2\n## 1458906 [m]\nunits::set_units(hi_ocean_border_perimeter_ne / 2, \"miles\")\n## 906.5 [miles]\n\n# Proportion\nas.numeric((hi_ocean_border_perimeter_ne / 2) / hi_border_perimeter_ne) |> \n  scales::label_percent()()\n## [1] \"100%\"\n```\n:::\n\n\n\n## North Carolina\n\nThe same process works for North Carolina\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nne_nc <- ne_states |> filter(name == \"North Carolina\")\nbbox_ne_nc <- ne_nc |> st_transform(st_crs(\"EPSG:4269\")) |> st_bbox()\n\nnc_ocean_border_ne <- ne_nc |> \n  st_buffer(dist = 0.001) |> \n  st_difference(na_giant)\n\nggplot() +\n  geom_sf(data = nc_ocean_border_ne, linewidth = 0.2) +\n  labs(title = \"North Carolina’s coastal borders\\nextracted from North America shape\") +\n  coord_sf(crs = st_crs(\"EPSG:4269\")) +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-nc-ne-borders-extracted-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nHere's that extracted coastline with the rest of the state:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = na_giant, fill = clrs[10], alpha = 0.4) +\n  geom_sf(data = ne_nc, linewidth = 0.1, fill = clrs[6]) +\n  geom_sf(\n    data = nc_ocean_border_ne, linewidth = 0.4, \n    aes(color = \"Coastal border extracted from North America shape\"),\n    key_glyph = draw_key_path\n  ) +\n  annotate(geom = \"text\", x = I(0.6), y = I(0.89), label = \"↑ Virginia ↑\") +\n  annotate(geom = \"text\", x = I(0.58), y = I(0.3), label = \"↓ South Carolina ↓\", angle = 313) +\n  annotate(geom = \"text\", x = I(0.14), y = I(0.5), label = \"↓ Georgia\") +\n  annotate(geom = \"text\", x = I(0.27), y = I(0.64), label = \"← Tennessee\") +\n  scale_color_manual(values = c(clrs[8])) +\n  labs(title = \"The actual North Carolina coastline\", color = NULL) +\n  coord_sf(\n    xlim = bbox_ne_nc[c(1, 3)],\n    ylim = bbox_ne_nc[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean),\n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0)),\n    legend.key.height = unit(0.5, \"lines\"),\n    legend.key = element_rect(fill = NA, color = NA),\n    legend.position = \"top\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-nc-ne-coastal-borders-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nNow we can calculate proportion of coastline:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# State border\nnc_border_perimeter_ne <- ne_nc |> \n  st_perimeter()\nnc_border_perimeter_ne\n## 4095093 [m]\nunits::set_units(nc_border_perimeter_ne, \"miles\")\n## 2545 [miles]\n\n# Coastal border\nnc_ocean_border_perimeter_ne <- nc_ocean_border_ne |> \n  st_perimeter()\nnc_ocean_border_perimeter_ne / 2\n## 2596482 [m]\nunits::set_units(nc_ocean_border_perimeter_ne / 2, \"miles\")\n## 1613 [miles]\n\n# Proportion\nas.numeric((nc_ocean_border_perimeter_ne / 2) / nc_border_perimeter_ne) |> \n  scales::label_percent()()\n## [1] \"63%\"\n```\n:::\n\n\n\nSharp-eyed readers will notice something odd, though! Using Census maps at 1:5 million resolution, we found that 55% of North Carolina's borders were coastline. Using Natural Earth maps at 1:10 million resolution, it becomes 63%. I'll talk more about that discrepancy [later in this post](#the-coastline-paradox-and-map-resolutions) (spoiler: it's because of the new-to-me [Coastline Paradox](https://en.wikipedia.org/wiki/Coastline_paradox)). The detail in the two maps is different, so the amount of landmass visible along the coastline is different, yielding different perimeters and distances.\n\n\n## Washington\n\nWhen we were using Census data, we couldn't use this process with Washington because Canada was invisible and was being treated as an ocean. Now that we have data from Natural Earth, Canada can be accounted for and we'll get the correct ocean-facing border.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nne_wa <- ne_states |> filter(name == \"Washington\")\nbbox_ne_wa <- ne_wa |> st_transform(st_crs(\"EPSG:4269\")) |> st_bbox()\n\nwa_ocean_border_ne <- ne_wa |> \n  st_buffer(dist = 0.001) |> \n  st_difference(na_giant)\n\nggplot() +\n  geom_sf(data = wa_ocean_border_ne, linewidth = 0.2) +\n  labs(title = \"Washington’s coastal borders\\nextracted from North America shape\") +\n  coord_sf(crs = st_crs(\"EPSG:4269\")) +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-wa-ne-borders-extracted-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nHere's that coastline in context:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = na_giant, fill = clrs[10], alpha = 0.4) +\n  geom_sf(data = ne_wa, linewidth = 0.1, fill = clrs[3]) +\n  geom_sf(\n    data = wa_ocean_border_ne, linewidth = 0.4, \n    aes(color = \"Coastal border extracted from North America shape\"),\n    key_glyph = draw_key_path\n  ) +\n  annotate(geom = \"text\", x = I(0.64), y = I(0.91), label = \"↑ Canada (British Columbia) ↑\") +\n  annotate(geom = \"text\", x = I(0.54), y = I(0.18), label = \"↓ Oregon ↓\") +\n  annotate(geom = \"text\", x = I(0.87), y = I(0.5), label = \"Idaho →\") +\n  scale_color_manual(values = c(clrs[8])) +\n  labs(title = \"The actual Washington coastline\", color = NULL) +\n  coord_sf(\n    xlim = bbox_ne_wa[c(1, 3)],\n    ylim = bbox_ne_wa[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean),\n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0)),\n    legend.key.height = unit(0.5, \"lines\"),\n    legend.key = element_rect(fill = NA, color = NA),\n    legend.position = \"top\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-wa-ne-coastal-borders-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nSince the northern state border is no longer seen as a coastal border, can calculate the correct proportion of coastline:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# State border\nwa_border_perimeter_ne <- ne_wa |> \n  st_perimeter()\nwa_border_perimeter_ne\n## 3913863 [m]\nunits::set_units(wa_border_perimeter_ne, \"miles\")\n## 2432 [miles]\n\n# Coastal border\nwa_ocean_border_perimeter_ne <- wa_ocean_border_ne |> \n  st_perimeter()\nwa_ocean_border_perimeter_ne / 2\n## 2591575 [m]\nunits::set_units(wa_ocean_border_perimeter_ne / 2, \"miles\")\n## 1610 [miles]\n\n# Proportion\nas.numeric((wa_ocean_border_perimeter_ne / 2) / wa_border_perimeter_ne) |> \n  scales::label_percent()()\n## [1] \"66%\"\n```\n:::\n\n\n\n\n## All states\n\nNow that we know that the Natural Earth approach works, let's apply it to all the states. We'll nest the geographic data into a list column with a cell for each state, then extract the borders for each state\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nne_coastline <- ne_states |>\n  group_by(name) |> \n  nest() |> \n  mutate(ocean_only = map(data, ~ {\n    .x |> \n      st_buffer(dist = 0.001) |> \n      st_difference(na_giant)\n  })) |> \n  unnest(ocean_only) |> \n  ungroup() |> \n  # This special column somehow lost its specialness\n  st_set_geometry(\"geometry\") \n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot() +\n  geom_sf(data = na_giant, linewidth = 0, fill = clrs[10], alpha = 0.5) +\n  geom_sf(\n    data = ne_coastline, linewidth = 0.2, \n    aes(color = \"Coastal border extracted from North America shape\"),\n    key_glyph = draw_key_path\n  ) +\n  scale_color_manual(values = c(clrs[8])) +\n  labs(title = \"All US coastal borders\", color = NULL) +\n  coord_sf(crs = st_crs(\"ESRI:102003\")) +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean),\n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0)),\n    legend.key.height = unit(0.5, \"lines\"),\n    legend.key = element_rect(fill = NA, color = NA),\n    legend.position = \"top\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-all-coastline-ne-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nThat looks great!\n\nFinally, let's put this in a table. We'll calculate the perimeter of all the states, then join that data to the coastal data, and then calculate the proportion of coastline.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nne_state_border_lengths <- ne_states |> \n  mutate(border_length = st_perimeter(geometry)) |> \n  st_drop_geometry() |> \n  select(name, border_length)\n\ncoastline_length_by_state_ne <- ne_coastline |> \n  mutate(coastline_length = st_perimeter(geometry) / 2) |> \n  st_drop_geometry() |> \n  left_join(ne_state_border_lengths, by = join_by(name)) |> \n  mutate(prop_coastline = as.numeric(coastline_length / border_length)) |> \n  mutate(rank = rank(-prop_coastline)) |> \n  mutate(\n    across(c(border_length, coastline_length), \n      list(miles = ~units::set_units(., \"miles\")))\n  ) |> \n  select(\n    name, rank, prop_coastline, \n    starts_with(\"border_length\"), starts_with(\"coastline_length\")\n  )\n```\n:::\n\n\n\nThis is fantastic! Hawaiʻi has the highest proportion of coastline, for obvious reasons, and an astounding 95% of Alaska's borders touch the ocean, even though a huge chunk of the state shares a land border with Canada—there are just so many islands and inlets.\n\nIn the contiguous United States, island-y states like Florida, Michigan, and Louisiana have the highest proportion of coastline. Despite their small size, the coastal New England states like New Jersey, Massachusetts, and Rhode Island have a lot of coastline relative to the rest of their borders. Check out Rhode Island at #10—my wife's offhand observation was pretty accurate! (These columns are sortable.)\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\ncoastline_length_by_state_ne |> \n  select(-border_length, -coastline_length) |> \n  mutate(across(c(border_length_miles, coastline_length_miles), ~as.numeric(.))) |> \n  arrange(desc(prop_coastline)) |> \n  gt() |> \n  cols_label(\n    name ~ \"State\", \n    rank ~ \"Rank\",\n    prop_coastline ~ \"% coastline\",\n    border_length_miles ~ \"Border length (miles)\",\n    coastline_length_miles ~ \"Coastline length (miles)\"\n  ) |> \n  fmt_percent(\n    columns = prop_coastline,\n    decimals = 1\n  ) |> \n  fmt_number(\n    columns = ends_with(\"miles\"),\n    decimals = 0\n  ) |> \n  opt_interactive(page_size_default = 16, use_compact_mode = TRUE, use_highlight = TRUE) |> \n  opt_table_font(\"Libre Franklin\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"bcunwomctv\" class=\".gt_table\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#bcunwomctv table {\n  font-family: 'Libre Franklin', system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#bcunwomctv thead, #bcunwomctv tbody, #bcunwomctv tfoot, #bcunwomctv tr, #bcunwomctv td, #bcunwomctv th {\n  border-style: none;\n}\n\n#bcunwomctv p {\n  margin: 0;\n  padding: 0;\n}\n\n#bcunwomctv .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#bcunwomctv .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#bcunwomctv .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#bcunwomctv .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#bcunwomctv .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#bcunwomctv .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#bcunwomctv .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#bcunwomctv .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#bcunwomctv .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#bcunwomctv .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#bcunwomctv .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#bcunwomctv .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#bcunwomctv .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#bcunwomctv .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#bcunwomctv .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bcunwomctv .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#bcunwomctv .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#bcunwomctv .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#bcunwomctv .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bcunwomctv .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#bcunwomctv .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bcunwomctv .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#bcunwomctv .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bcunwomctv .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bcunwomctv .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bcunwomctv .gt_left {\n  text-align: left;\n}\n\n#bcunwomctv .gt_center {\n  text-align: center;\n}\n\n#bcunwomctv .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#bcunwomctv .gt_font_normal {\n  font-weight: normal;\n}\n\n#bcunwomctv .gt_font_bold {\n  font-weight: bold;\n}\n\n#bcunwomctv .gt_font_italic {\n  font-style: italic;\n}\n\n#bcunwomctv .gt_super {\n  font-size: 65%;\n}\n\n#bcunwomctv .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#bcunwomctv .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#bcunwomctv .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#bcunwomctv .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#bcunwomctv .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#bcunwomctv .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#bcunwomctv .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#bcunwomctv .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#bcunwomctv div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<div id=\"bcunwomctv\" class=\"reactable html-widget\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"bcunwomctv\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"name\":[\"Hawaii\",\"Alaska\",\"Florida\",\"Michigan\",\"New Jersey\",\"Washington\",\"Louisiana\",\"Massachusetts\",\"Maryland\",\"Rhode Island\",\"North Carolina\",\"Maine\",\"New York\",\"California\",\"Delaware\",\"Virginia\",\"Wisconsin\",\"South Carolina\",\"Connecticut\",\"Texas\",\"Oregon\",\"Georgia\",\"Ohio\",\"District of Columbia\",\"Alabama\",\"Mississippi\",\"Minnesota\",\"Pennsylvania\",\"Illinois\",\"Indiana\",\"New Hampshire\"],\"rank\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],\"prop_coastline\":[1.00000002305719,0.950356743835664,0.866168192243435,0.830979983940767,0.728816503449743,0.662152795310262,0.654314581445184,0.654108863415661,0.651446703084627,0.637147952416471,0.634047014369978,0.62340643184199,0.593173451960401,0.590058431541649,0.511361993061225,0.505330354491681,0.451669337880791,0.447885940985075,0.378139483577159,0.372858710272812,0.32946858227647,0.234051531206005,0.230535075884157,0.222097678934753,0.182423646280105,0.145388849315363,0.0940002244112465,0.086326481085529,0.0478578044572803,0.0416353715802241,0.0376899575172537],\"border_length_miles\":[906.521886547635,24866.234473789,3458.36073177283,2752.32413875135,665.766399521454,2431.96179010171,2237.82207853154,954.049030861188,1733.0905012548,302.971423449822,2544.57301885066,1677.04565289963,1998.40034151875,2886.95130942461,296.33200227838,2062.13873186231,1370.80550447945,1091.85454262226,356.162508399253,4068.22109594084,1537.6350636342,1302.59642649316,999.983576641033,36.7733271116633,1180.66135054376,1184.30972223058,1604.67088013519,957.47472629315,1200.85938547766,987.018260921426,491.715226799401],\"coastline_length_miles\":[906.521907449481,23631.7936259643,2995.52206316535,2287.12626861938,485.221539413551,1610.3302974036,1464.23961666316,624.051927219425,1129.01609318972,193.037622091758,1613.37892544867,1045.48104651028,1185.39802897752,1703.4699615762,151.532923292896,1042.061296383,619.150814571575,489.026299241198,134.679106995639,1516.87167093715,506.602444474149,304.874688164196,230.531289723851,8.16727059820884,215.380548588185,172.185427748101,150.8394228389,82.6554238492177,57.4704936508795,41.0948720499302,18.5327260086562]},\"columns\":[{\"id\":\"name\",\"name\":\"State\",\"type\":\"character\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"Hawaii\",\"Alaska\",\"Florida\",\"Michigan\",\"New Jersey\",\"Washington\",\"Louisiana\",\"Massachusetts\",\"Maryland\",\"Rhode Island\",\"North Carolina\",\"Maine\",\"New York\",\"California\",\"Delaware\",\"Virginia\",\"Wisconsin\",\"South Carolina\",\"Connecticut\",\"Texas\",\"Oregon\",\"Georgia\",\"Ohio\",\"District of Columbia\",\"Alabama\",\"Mississippi\",\"Minnesota\",\"Pennsylvania\",\"Illinois\",\"Indiana\",\"New Hampshire\"],\"html\":true,\"align\":\"left\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"rank\",\"name\":\"Rank\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"prop_coastline\",\"name\":\"% coastline\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"100.0%\",\"95.0%\",\"86.6%\",\"83.1%\",\"72.9%\",\"66.2%\",\"65.4%\",\"65.4%\",\"65.1%\",\"63.7%\",\"63.4%\",\"62.3%\",\"59.3%\",\"59.0%\",\"51.1%\",\"50.5%\",\"45.2%\",\"44.8%\",\"37.8%\",\"37.3%\",\"32.9%\",\"23.4%\",\"23.1%\",\"22.2%\",\"18.2%\",\"14.5%\",\"9.4%\",\"8.6%\",\"4.8%\",\"4.2%\",\"3.8%\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"border_length_miles\",\"name\":\"Border length (miles)\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"907\",\"24,866\",\"3,458\",\"2,752\",\"666\",\"2,432\",\"2,238\",\"954\",\"1,733\",\"303\",\"2,545\",\"1,677\",\"1,998\",\"2,887\",\"296\",\"2,062\",\"1,371\",\"1,092\",\"356\",\"4,068\",\"1,538\",\"1,303\",\"1,000\",\"37\",\"1,181\",\"1,184\",\"1,605\",\"957\",\"1,201\",\"987\",\"492\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"coastline_length_miles\",\"name\":\"Coastline length (miles)\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"907\",\"23,632\",\"2,996\",\"2,287\",\"485\",\"1,610\",\"1,464\",\"624\",\"1,129\",\"193\",\"1,613\",\"1,045\",\"1,185\",\"1,703\",\"152\",\"1,042\",\"619\",\"489\",\"135\",\"1,517\",\"507\",\"305\",\"231\",\"8\",\"215\",\"172\",\"151\",\"83\",\"57\",\"41\",\"19\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}}],\"defaultPageSize\":16,\"showPageSizeOptions\":false,\"pageSizeOptions\":[10,25,50,100],\"paginationType\":\"numbers\",\"showPagination\":true,\"showPageInfo\":true,\"minRows\":1,\"highlight\":true,\"compact\":true,\"height\":\"auto\",\"theme\":{\"color\":\"#333333\",\"backgroundColor\":\"#FFFFFF\",\"stripedColor\":\"rgba(128,128,128,0.05)\",\"style\":{\"fontFamily\":\"'Libre Franklin', system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif\"},\"tableStyle\":{\"borderTopStyle\":\"solid\",\"borderTopWidth\":\"2px\",\"borderTopColor\":\"#D3D3D3\"},\"headerStyle\":{\"borderBottomStyle\":\"solid\",\"borderBottomWidth\":\"2px\",\"borderBottomColor\":\"#D3D3D3\"}},\"elementId\":\"bcunwomctv\",\"dataKey\":\"d0c5fa42bb98519f25d2a8275e41e22c\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[\"tag.attribs.columns.0.style\",\"tag.attribs.columns.1.style\",\"tag.attribs.columns.2.style\",\"tag.attribs.columns.3.style\",\"tag.attribs.columns.4.style\"],\"jsHooks\":[]}</script>\n</div>\n```\n\n:::\n:::\n\n\n\n## Highlighting coastal states\n\nThere are 31 states (technically 30 + Washington, D.C.) that touch the ocean or one of the Great Lakes somewhere. For bonus fun, we can highlight them on a map to show what we're working with. For the sake of plotting, and to show off one really neat feature in {tigris}, we'll shift Alaska and Hawaiʻi around so that they're where Mexico would be.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nne_states_to_plot <- ne_states |> \n  mutate(is_coastal = name %in% ne_coastline$name) |> \n  tigris::shift_geometry()\n\nggplot() + \n  geom_sf(\n    data = ne_states_to_plot, aes(fill = is_coastal),\n    linewidth = 0.05, color = \"grey70\"\n  ) +\n  scale_fill_manual(values = c(\"white\", clrs[8]), guide = \"none\") +\n  labs(title = \"US states with a coastline\") +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-coastal-states-binary-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nThat's cool, but we can make it fancier. Right now we've filled all the coastal states with red, but it would be neat to fill them with different colors. We *could* use `aes(fill = name)`, but that would give us 31 different indistinguishable colors. \n\nAnother approach would be to choose a smaller number of colors (like 5) and assign them across the coastal states. But how we allocate these colors is a little tricky. If we assign them randomly, or based on alphabetical order, or some other system, we'll get bordering states that share the same color, which looks bad aesthetically (and reduces the map's readability and usability). For example, here we assign the colors 1–5 to the coastal states alphabetically, and we end up with blobs like Wisconsin + Michigan + Indiana, Pennsylvania + New Jersey + Delaware, Virginia + Maryland, and North + South Carolina. That's not great.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nne_states_to_plot_colors_alphabetic <- ne_states |> \n  mutate(is_coastal = name %in% ne_coastline$name) |> \n  arrange(name, is_coastal) |> \n  group_by(is_coastal) |> \n  mutate(coastal_colors = case_when(\n    is_coastal ~ rep(1:5, length.out = n()),\n     .default = NA\n  )) |> \n  ungroup() |> \n  tigris::shift_geometry()\n\nggplot() + \n  geom_sf(\n    data = ne_states_to_plot_colors_alphabetic, aes(fill = factor(coastal_colors)),\n    linewidth = 0.05, color = \"grey70\"\n  ) +\n  scale_fill_manual(\n    values = clrs[c(1, 6, 2, 7, 8)], na.value = \"grey95\", guide = \"none\"\n  ) +\n  labs(title = \"US states with a coastline\") +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-coastal-states-5-but-bad-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nThere are ways to color *all* US states with [four](https://en.wikipedia.org/wiki/Four_color_theorem) or [five](https://en.wikipedia.org/wiki/Five_color_theorem) unique colors, but we don't really want to do that here because we're ignoring all the non-coastal states and want a balanced set of colors.\n\nSo we can use a neat approach where we pretend this map is a circle. We'll start with some state and assign it color 1. We'll then move along the exterior of the circle clockwise and assign the next state to color 2, then the next state color 3, and so on until we loop all the way around the circle back to the first state. That *should* give us noncontiguous colors around the whole border. \n\nWe'll omit Alaska and Hawaiʻi for this part, since we can assign them any arbitrary colors later. We'll first find the center of each state, then find the northernmost state as the starting point, and then calculate the angle of every other state in relation to the starting state. We can then sort the data by the angle and assign the colors 1–5 in order.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Calculate the center of each coastal state in the lower 48\ncoastal_states_centers <- ne_states |> \n  filter(name %in% ne_coastline$name) |> \n  filter(!(name %in% c(\"Alaska\", \"Hawaii\"))) |> \n  mutate(centroid = st_centroid(geometry)) |> \n  mutate(centroid_coords = st_coordinates(centroid)) |>\n  mutate(\n    longitude = centroid_coords[, \"X\"],\n    latitude = centroid_coords[, \"Y\"]\n  ) |> \n  select(-centroid_coords)\n\n# Find the northernmost state (Washington) to use as a reference point\nnorthest_state <- coastal_states_centers |> slice_max(order_by = latitude)\n\n# Calculate the angle from the northernmost state to the center of all other\n# states, then arrange by angle so that the states are all sorted clockwise\ncoastal_states_angles <- coastal_states_centers |> \n  mutate(\n    angle_rad = atan2(\n      longitude - northest_state$longitude, \n      latitude - northest_state$latitude\n    ),\n    # Not really necessary, but I can't think in radians\n    angle_deg = angle_rad * (180 / pi)\n  ) |> \n  arrange(angle_rad) |> \n  mutate(color_group = rep(1:5, length.out = n()))\n```\n:::\n\n\n\nThis is really cool. California and Oregon are both directly south of Washington, so they are at a nearly −180° (or −1π rad) angle from that state. The circle then jumps over to New England (since Maine is at a 90° or π/2 rad angle from Washington) before coming back to the Midwest, then looping down along the east and south coasts, ending with Texas.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncoastal_states_angles |> \n  st_drop_geometry() |> \n  select(name, angle_rad, angle_deg, color_group)\n##                    name angle_rad angle_deg color_group\n## 1            California    -2.960   -169.57           1\n## 2                Oregon    -2.861   -163.93           2\n## 3            Washington     0.000      0.00           3\n## 4                 Maine     1.613     92.44           4\n## 5         New Hampshire     1.676     96.01           5\n## 6         Massachusetts     1.716     98.33           1\n## 7              New York     1.728     98.99           2\n## 8          Rhode Island     1.730     99.10           3\n## 9           Connecticut     1.741     99.76           4\n## 10            Minnesota     1.751    100.35           5\n## 11             Michigan     1.766    101.19           1\n## 12            Wisconsin     1.795    102.86           2\n## 13           New Jersey     1.798    103.02           3\n## 14         Pennsylvania     1.810    103.70           4\n## 15             Delaware     1.839    105.36           5\n## 16             Maryland     1.851    106.07           1\n## 17 District of Columbia     1.858    106.44           2\n## 18                 Ohio     1.883    107.88           3\n## 19             Virginia     1.917    109.86           4\n## 20              Indiana     1.940    111.18           5\n## 21             Illinois     1.976    113.22           1\n## 22       North Carolina     1.977    113.26           2\n## 23       South Carolina     2.040    116.89           3\n## 24              Georgia     2.112    121.01           4\n## 25              Alabama     2.168    124.20           5\n## 26              Florida     2.186    125.25           1\n## 27          Mississippi     2.223    127.37           2\n## 28            Louisiana     2.317    132.77           3\n## 29                Texas     2.493    142.82           4\n```\n:::\n\n\n\nNow that we have better color assignments, we can make a nicer map with unique colors for each state:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncoastal_state_colors <- coastal_states_angles |> \n  st_drop_geometry() |>  # No need for geography stuff \n  select(name, color_group) |> \n  # Add Alaska and Hawaii back; the last color assigned was 4, so continue with 5\n  add_row(name = \"Alaska\", color_group = 5) |> \n  add_row(name = \"Hawaii\", color_group = 1)\n\nne_states_to_plot_colors <- ne_states |> \n  left_join(coastal_state_colors, by = join_by(name)) |> \n  tigris::shift_geometry()\n\nggplot() + \n  geom_sf(\n    data = ne_states_to_plot_colors, aes(fill = factor(color_group)),\n    linewidth = 0.05, color = \"grey70\"\n  ) +\n  scale_fill_manual(\n    values = clrs[c(1, 6, 2, 7, 8)], na.value = \"grey95\", guide = \"none\"\n  ) +\n  labs(title = \"US states with a coastline\") +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-coastal-states-5-but-good-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\n\n\n\n\n# The Coastline Paradox and map resolutions\n\nCalculating these coastline lengths has been a tricky (but fun!) journey so far, involving all sorts of GIS shenanigans to extract borders from overlapping shapefiles. So far we've really only dealt with technical challenges, like finding the right kinds of shapefiles.\n\nBut in the course of writing this post and figuring all of this out, I stumbled on a deeper, more philosophical challenge: [the Coastline Paradox](https://en.wikipedia.org/wiki/Coastline_paradox). Weirdly, **coastlines don't have well-defined lengths**. The measured length of a coastline depends on how detailed the map is, and **more detail isn't actually better**.\n\n## Hypothetical coastline at different resolutions\n\nTo illustrate this, let's invent a fake coastline with lots of jagged edges. If we take a boat a few miles offshore and sail from one end to the other in a straight line, it's 500 miles long. If we walk from one end to the other and walk as close as possible to the water, however, it's 14,000 miles long. That's a huge discrepancy.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nwithr::with_seed(12345, {\n  example_coastline <- tibble(\n    x = seq(0, 10, length.out = 500), \n    y = rnorm(500, mean = 0, sd = 0.5)\n  ) |> \n    as.matrix() |> \n    st_linestring()\n})\n\ntotal_distance <- example_coastline |> st_length() * 50\n\nggplot() + \n  geom_sf(data = example_coastline, linewidth = 0.35, color = \"grey60\") +\n  annotate(geom = \"errorbar\", xmin = 0, xmax = 10, y = 2.3) +\n  annotate(\n    geom = \"text\", x = 5, y = 2.6, \n    label = \"500 miles\", \n    family = \"Overpass ExtraBold\"\n  ) +\n  annotate(\n    geom = \"text\", x = 5, y = 2, \n    label = \"Straight distance\"\n  ) +\n  annotate(geom = \"errorbar\", xmin = 0, xmax = 10, y = -2.3) +\n  annotate(\n    geom = \"text\", x = 5, y = -2, \n    label = paste0(scales::label_comma()(total_distance), \" miles\"), \n    family = \"Overpass ExtraBold\"\n  ) +\n  annotate(\n    geom = \"text\", x = 5, y = -2.6, \n    label = \"Total distance following complete path\"\n  ) +\n  theme_map()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-fake-coastline-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\n14,000 miles feels excessive, and no map includes that much detail. Maps have different resolutions that define how much detail is included, scaling 10 kilomters in real life to 1 centimeter in the map, or 500 km to 1 cm, or 110 km to 1 cm, and so on. We need to adjust the resolution of our fictional coastline and simplify and smooth out the line. \n\nHowever, the border length changes dramatically the more we simplify:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(smoothr)\n## \n## Attaching package: 'smoothr'\n## The following object is masked from 'package:stats':\n## \n##     smooth\n\nexample_coastlines <- tibble(\n  tolerance = c(0.2, 0.5, 1.3, 5)\n) |> \n  mutate(full_coast = list(example_coastline)) |> \n  mutate(simplified_coast = map2(\n    full_coast, tolerance, ~st_simplify(.x, dTolerance = .y)\n  )) |> \n  mutate(simplified_coast = map(simplified_coast, ~smooth(.x, method = \"ksmooth\", smoothness = 0.6))) |>\n  mutate(simplified_coast = st_sfc(simplified_coast)) |> \n  mutate(distance = st_length(simplified_coast) * 50) |> \n  mutate(plot = pmap(list(distance, full_coast, simplified_coast), ~{\n    ggplot() + \n      geom_sf(data = ..2, linewidth = 0.15, color = \"grey70\") +\n      geom_sf(data = ..3, linewidth = 0.6, color = clrs[2]) +\n      labs(title = paste0(scales::label_comma()(..1), \" miles\")) +\n      theme_map()\n  }))\n\nwrap_plots(example_coastlines$plot, ncol = 2)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-fake-coastline-different-resolution-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nSo which one of those is right? How long is the actual coastline? Is it 14,000 miles? 5,000 miles? 2,500 miles? 1,000 miles? 500 miles? There's no right answer.\n\nThe length shrinks as we decrease the resolution, and the length grows as we increase the resolution. Coastlines behave almost like [fractals](https://en.wikipedia.org/wiki/Fractal)—as you zoom in more and more and more, the length can increase almost infinitely.^[Not *actually* infinitely, since there is a finite amount of land, but still.] Imagine that we want to be hyper precise when measuring the coastline and we include any boulders or trees or driftwood poking into the water from the shore. Then imagine that we include all the little bumps and imperfections in the boulders and all the edges of the shattered wood in the broken logs. The coastline will become *enormously* long.\n\n## Dubai and artificial coastlines\n\nThis isn't just hypothetical. In the early 2000s, in an effort to increase the coastline available for construction, Dubai started building a [series of artificial islands in the shape of palm trees](https://en.wikipedia.org/wiki/Palm_Islands), and [one in the shape of the world](https://en.wikipedia.org/wiki/The_World_(archipelago)).\n\n![Island developments in Dubai in 2010, [by Wikipedia user Lencer](https://commons.wikimedia.org/w/index.php?curid=38517839)](img/Dubai_new_developments.png){width=90%}\n\nHow do we count how much coastline Dubai added with these islands? Do we only count the outer circles of Palm Jumeirah, Palm Deira, and Palm Jebel Ali? The island designers cut canals through those outer circles for boat access—do we count the border for each of those segments? If so, more than double the coastline. Do we count the palm fronds within each of the circles? We probably should! That then adds another huge chunk of coastline. What if the island designers added hundreds of little bays into each of the fronds, creating the illusion of separate leaves? That would exponentially increase the coastline length. Each of those tiny islands in The World archipelago should probably get added to the coastline too.\n\nAt the extreme, Dubai could build a single actual fractal-shaped island and become a mathematical island—there would be so much coastline that the proportion of coastline to land borders would basically be 100%.\n\n# Use lower resolution Natural Earth coastlines\n\nEarlier, we used high resolution (1:10 million) data from Natural Earth to calculate the proportion of coastline for each state. But this might have been too ambitious. We found that 95% of Alaska's borders touch the ocean, despite its huge land border with Canada. Because the map data had such high resolution, we picked up lots of details in each of the [Aleutian Islands](https://en.wikipedia.org/wiki/Aleutian_Islands), as well as every little inlet and bay on the mainland.\n\nWhat happens if we use low resolution data instead, like Natural Earth's 1:110 million maps? How much does that influence the rankings of the proportion of coastline?\n\nLet's grab the 1:110 million data from Natural Earth and try it out. \n\n**But first, a warning.** We won't be able to get exact answers with this data. The key to extracting coastlines from states earlier was to use data for all of North America. Natural Earth provided state/province-level data for the United States, Mexico, and Canada, and we merged all those administrative units into one big giant landmass, which guaranteed that the individual Natural Earth state shapes matched the overall landmass perfectly. This won't work with other Natural Earth resolutions. At 1:50 million, Natural Earth does not include Mexican states; at 1:110 million, Natural Earth *only* includes the United States. We can't make a consistent unified North American landmass at these resolutions. We can get close—we can get country-level data at 1:110 million and create a merged North American shape, but it won't match the state borders exactly. \n\nNevertheless, we'll try.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Country-level data\nif (!file.exists(\"ne_data/ne_110m_admin_0_countries_lakes.shp\")) {\n  ne_download(\n    type = \"admin_0_countries_lakes\", \n    scale = 110,\n    destdir = \"ne_data\",\n    load = FALSE\n  )\n}\n\nworld_110 <- ne_load(\n  type = \"admin_0_countries_lakes\", \n  scale = 110,\n  destdir = \"ne_data\"\n)\n\n# Make a unified North America shape\nna_giant_110 <- world_110 |> \n  filter(NAME %in% c(\"United States of America\", \"Canada\", \"Mexico\")) |> \n  st_transform(crs = st_crs(\"ESRI:102003\")) |> \n  st_union()\n\n# State-level data\nif (!file.exists(\"ne_data/ne_110m_admin_1_states_provinces_lakes.shp\")) {\n  ne_download(\n    type = \"admin_1_states_provinces_lakes\", \n    scale = 110,\n    destdir = \"ne_data\",\n    load = FALSE\n  )\n}\n\nstates_110 <- ne_load(\n  type = \"admin_1_states_provinces_lakes\", \n  scale = 110,\n  destdir = \"ne_data\"\n) |> \n  filter(admin == \"United States of America\") |> \n  st_transform(crs = st_crs(\"ESRI:102003\"))\n```\n:::\n\n::: {.cell .column-page layout-align=\"center\"}\n\n```{.r .cell-code}\n# Rename these for consistency with the 110 versions\nstates_10 <- ne_states\nna_giant_10 <- na_giant\n\np1 <- ggplot() + \n  geom_sf(data = na_giant_10, linewidth = 0, fill = clrs[10]) +\n  geom_sf(data = states_10, linewidth = 0.05, fill = clrs[8], color = \"white\") +\n  labs(title = \"High resolution\", subtitle = \"1:10 million\") +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean), \n    plot.subtitle = element_text(margin = margin(6.5/2, 0, 6.5, 0))\n  )\n\np2 <- ggplot() + \n  geom_sf(data = na_giant_110, linewidth = 0, fill = clrs[10]) +\n  geom_sf(data = states_110, linewidth = 0.05, fill = clrs[8], color = \"white\") +\n  labs(title = \"Low resolution\", subtitle = \"1:110 million\") +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean), \n    plot.subtitle = element_text(margin = margin(6.5/2, 0, 6.5, 0))\n  )\n\np1 | p2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-na-ne-different-resolutions-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n\nWe can already see some sizable differences in the detail in the border. The low resolution version drops most of the Aleutian Islands, removes North Carolina's Outer Banks, and greatly simplifies Washington's Puget Sound.\n\nLet's zoom in on Hawaiʻi for fun. The high resolution version looks great; the low resolution one looks like it was drawn in Minecraft.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhi_110 <- states_110 |> filter(name == \"Hawaii\")\nhi_10 <- states_10 |> filter(name == \"Hawaii\")\n\nbbox_hi_110 <- hi_110 |> st_transform(st_crs(\"EPSG:4269\")) |> st_bbox()\n\np1 <- ggplot() +\n  geom_sf(data = hi_10, linewidth = 0.1, fill = clrs[5]) +\n  labs(title = \"High resolution\", subtitle = \"1:10 million\") +\n  coord_sf(\n    xlim = bbox_hi_110[c(1, 3)],\n    ylim = bbox_hi_110[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean), \n    plot.subtitle = element_text(margin = margin(6.5/2, 0, 6.5, 0))\n  )\n\np2 <- ggplot() +\n  geom_sf(data = hi_110, linewidth = 0.1, fill = clrs[5]) +\n  labs(title = \"Low resolution\", subtitle = \"1:110 million\") +\n  coord_sf(\n    xlim = bbox_hi_110[c(1, 3)],\n    ylim = bbox_hi_110[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) + \n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean), \n    plot.subtitle = element_text(margin = margin(6.5/2, 0, 6.5, 0))\n  )\n\np1 | p2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-hi-ne-different-resolutions-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nWe can go through the same process as before, extracting the coastal borders from the larger North American shape, then finding the coast-to-border proportion:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Extract the Hawaiian borders from the low resolution North America shape\nhi_ocean_border_110 <- hi_110 |> \n  st_buffer(dist = 0.001) |> \n  st_difference(na_giant_110)\n\n# State border\nhi_border_perimeter_110 <- hi_110 |> \n  st_perimeter()\nhi_border_perimeter_110\n## 1078669 [m]\nunits::set_units(hi_border_perimeter_110, \"miles\")\n## 670.3 [miles]\n\n# Coastal border\nhi_ocean_border_perimeter_110 <- hi_ocean_border_110 |> \n  st_perimeter()\nhi_ocean_border_perimeter_110 / 2\n## 1078669 [m]\nunits::set_units(hi_ocean_border_perimeter_110 / 2, \"miles\")\n## 670.3 [miles]\n\n# Proportion\nas.numeric((hi_ocean_border_perimeter_110 / 2) / hi_border_perimeter_110) |> \n  scales::label_percent()()\n## [1] \"100%\"\n```\n:::\n\n\n\nThe simplified borders reduced the coastline by 200+ miles, but we still have the correct proportion.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nunits::set_units(hi_border_perimeter - hi_border_perimeter_110, \"miles\")\n## 207.9 [miles]\n```\n:::\n\n\n\nWe can do the same thing to all the states. But we actually run into serious issues here. The shapefile for the state borders doesn't precisely match the shapefile for the country borders, so the states don't perfectly overlap with the large North American shape. There are small (and some large) gaps in the coastal borders. To try to account for this, we'll add a 100 meter buffer around all the individual state borders (instead of 1 mm like before), but even then, there are some gaps.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nne_states_ocean_borders_110 <- states_110 |>\n  group_by(name) |> \n  nest() |> \n  mutate(ocean_only = map(data, ~ {\n    .x |> \n      st_buffer(dist = 100) |>\n      st_difference(na_giant_110)\n  }))\n\nne_coastline_110 <- ne_states_ocean_borders_110 |> \n  unnest(ocean_only) |> \n  ungroup() |> \n  st_set_geometry(\"geometry\")\n```\n:::\n\n\n\nFor instance, here's Washington, which has a big gap in the southwest border:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nwa_110 <- states_110 |> filter(name == \"Washington\")\nwa_10 <- states_10 |> filter(name == \"Washington\")\n\nbbox_wa_110 <- wa_110 |> st_transform(st_crs(\"EPSG:4269\")) |> st_bbox()\n\nggplot() +\n  geom_sf(data = na_giant_110, fill = clrs[10], alpha = 0.4) +\n  geom_sf(\n    data = filter(states_110, name == \"Washington\"), \n    linewidth = 0.1, fill = clrs[3]\n  ) +\n  geom_sf(\n    data = filter(ne_coastline_110, name == \"Washington\"), linewidth = 0.8, \n    aes(color = \"Coastal border extracted from low resolution North America shape\"),\n    key_glyph = draw_key_path\n  ) +\n  annotate(geom = \"text\", x = I(0.64), y = I(0.91), label = \"↑ Canada (British Columbia) ↑\") +\n  annotate(geom = \"text\", x = I(0.54), y = I(0.18), label = \"↓ Oregon ↓\") +\n  annotate(geom = \"text\", x = I(0.87), y = I(0.5), label = \"Idaho →\") +\n  scale_color_manual(values = c(clrs[8])) +\n  labs(title = \"Low resolution Washington coastline\", color = NULL) +\n  coord_sf(\n    xlim = bbox_wa_110[c(1, 3)],\n    ylim = bbox_wa_110[c(2, 4)],\n    crs = st_crs(\"EPSG:4269\")\n  ) +\n  theme_map() +\n  theme(\n    panel.background = element_rect(fill = clr_ocean),\n    plot.title = element_text(margin = margin(6.5, 0, 6.5, 0)),\n    legend.key.height = unit(0.5, \"lines\"),\n    legend.key = element_rect(fill = NA, color = NA),\n    legend.position = \"top\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/plot-wa-coastline-110-1.png){fig-align='center' width=95%}\n:::\n:::\n\n\n\nIf Natural Earth had 1:110 million-resolution data for US states, Mexican states, and Canadian provinces, all would be well. Alas.\n\nSo with the caveat that there are sizable gaps in the coastal borders, let's look at the proportions: \n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Find all low-resolution state perimeters\nne_state_border_lengths_110 <- states_110 |> \n  mutate(border_length = st_perimeter(geometry)) |> \n  st_drop_geometry() |> \n  select(name, border_length)\n\n# Calculate coastline perimeters and ratio of coast to border\ncoastline_length_by_state_ne_110 <- ne_coastline_110 |> \n  mutate(coastline_length = st_perimeter(geometry) / 2) |> \n  st_drop_geometry() |> \n  left_join(ne_state_border_lengths_110, by = join_by(name)) |> \n  # Cheat a little because, with the 100 meter buffer, Hawaii's coastline is\n  # slightly larger than its border\n  mutate(border_length = case_when(\n    name == \"Hawaii\" ~ coastline_length,\n    .default = border_length\n  )) |> \n  mutate(prop_coastline = as.numeric(coastline_length / border_length)) |> \n  mutate(rank = rank(-prop_coastline)) |> \n  mutate(\n    across(c(border_length, coastline_length), \n      list(miles = ~units::set_units(., \"miles\")))\n  ) |> \n  select(\n    name, rank, prop_coastline, \n    starts_with(\"border_length\"), starts_with(\"coastline_length\")\n  )\n```\n:::\n\n\n\nThe proportions and rankings changed a bit here. Alaska is now only 83% coastline instead of 95%. Michigan and Florida are still the top coastal states from the contiguous United States, but the New England states dropped substantially. Since the complex inlets and islands in New England were smoothed over, California rose from #14 to #6. (These columns are sortable.)\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\ncoastline_length_by_state_ne_110 |> \n  select(-border_length, -coastline_length) |> \n  mutate(across(c(border_length_miles, coastline_length_miles), ~as.numeric(.))) |> \n  arrange(desc(prop_coastline)) |> \n  gt() |> \n  cols_label(\n    name ~ \"State\", \n    rank ~ \"Rank\",\n    prop_coastline ~ \"% coastline\",\n    border_length_miles ~ \"Border length (miles)\",\n    coastline_length_miles ~ \"Coastline length (miles)\"\n  ) |> \n  fmt_percent(\n    columns = prop_coastline,\n    decimals = 1\n  ) |> \n  fmt_number(\n    columns = ends_with(\"miles\"),\n    decimals = 0\n  ) |> \n  opt_interactive(page_size_default = 16, use_compact_mode = TRUE, use_highlight = TRUE) |> \n  opt_table_font(\"Libre Franklin\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"zygvtosryq\" class=\".gt_table\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#zygvtosryq table {\n  font-family: 'Libre Franklin', system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#zygvtosryq thead, #zygvtosryq tbody, #zygvtosryq tfoot, #zygvtosryq tr, #zygvtosryq td, #zygvtosryq th {\n  border-style: none;\n}\n\n#zygvtosryq p {\n  margin: 0;\n  padding: 0;\n}\n\n#zygvtosryq .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#zygvtosryq .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zygvtosryq .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zygvtosryq .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zygvtosryq .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zygvtosryq .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zygvtosryq .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zygvtosryq .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zygvtosryq .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#zygvtosryq .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#zygvtosryq .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zygvtosryq .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zygvtosryq .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zygvtosryq .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zygvtosryq .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zygvtosryq .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#zygvtosryq .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#zygvtosryq .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#zygvtosryq .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zygvtosryq .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#zygvtosryq .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zygvtosryq .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zygvtosryq .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zygvtosryq .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zygvtosryq .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zygvtosryq .gt_left {\n  text-align: left;\n}\n\n#zygvtosryq .gt_center {\n  text-align: center;\n}\n\n#zygvtosryq .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zygvtosryq .gt_font_normal {\n  font-weight: normal;\n}\n\n#zygvtosryq .gt_font_bold {\n  font-weight: bold;\n}\n\n#zygvtosryq .gt_font_italic {\n  font-style: italic;\n}\n\n#zygvtosryq .gt_super {\n  font-size: 65%;\n}\n\n#zygvtosryq .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#zygvtosryq .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#zygvtosryq .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#zygvtosryq .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#zygvtosryq .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#zygvtosryq .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#zygvtosryq .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#zygvtosryq .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#zygvtosryq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<div id=\"zygvtosryq\" class=\"reactable html-widget\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"zygvtosryq\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"name\":[\"Hawaii\",\"Alaska\",\"Michigan\",\"Florida\",\"New Jersey\",\"California\",\"Massachusetts\",\"Wisconsin\",\"New York\",\"Louisiana\",\"Washington\",\"Delaware\",\"Connecticut\",\"Maine\",\"Maryland\",\"Rhode Island\",\"South Carolina\",\"North Carolina\",\"Oregon\",\"Virginia\",\"Ohio\",\"Texas\",\"Minnesota\",\"Georgia\",\"Mississippi\",\"Alabama\",\"Illinois\",\"Pennsylvania\",\"Indiana\",\"New Hampshire\"],\"rank\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],\"prop_coastline\":[1,0.826578721839132,0.741230447949974,0.70154802868831,0.47529559334139,0.422559323559038,0.410708306434224,0.355180351974834,0.354279041306692,0.333777372096147,0.3256024347498,0.318664195896749,0.307550772932554,0.302629334295,0.282171574916153,0.264742634974663,0.2442815493506,0.226048378695959,0.213948321352267,0.204011190556984,0.185691532669522,0.149331287408419,0.098464687558646,0.0937730536615907,0.0726300736282431,0.053049660810459,0.0512965303125375,0.0471220896703173,0.0453829546186212,0.0372701159213773],\"border_length_miles\":[671.224472430645,7064.61261206206,1849.39945636081,1551.13037089299,448.648412783552,2010.55600171779,555.355988652821,1122.82629692482,1332.53491833872,1116.88549171443,1279.1308138037,253.70004201216,317.318368579482,820.759060979213,874.6238483293,150.636228561968,768.685653920999,1234.43700410869,1349.35360041347,1326.68665688154,878.659060461396,2728.3798092644,1520.30264933558,1061.42620470295,1001.67418972791,1011.52143734185,1120.21615370549,928.16767640141,882.92776157891,480.967167884413],\"coastline_length_miles\":[671.224472430645,5839.45846316687,1370.83118747676,1088.19245393855,213.240613555631,849.579184063431,228.089317567704,398.805839348358,472.089193376734,372.791104356756,416.488107337978,80.8451198867764,97.5915095223168,248.385768240728,246.793988742305,39.8798320721412,187.775722503401,279.042483381066,288.6919377191,270.658924366469,163.159547631039,407.43246945659,149.69612536141,99.5331764514286,72.7516701514489,53.6608691534929,57.4632018851479,43.7372004764773,40.0698705352565,17.9257021014286]},\"columns\":[{\"id\":\"name\",\"name\":\"State\",\"type\":\"character\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"Hawaii\",\"Alaska\",\"Michigan\",\"Florida\",\"New Jersey\",\"California\",\"Massachusetts\",\"Wisconsin\",\"New York\",\"Louisiana\",\"Washington\",\"Delaware\",\"Connecticut\",\"Maine\",\"Maryland\",\"Rhode Island\",\"South Carolina\",\"North Carolina\",\"Oregon\",\"Virginia\",\"Ohio\",\"Texas\",\"Minnesota\",\"Georgia\",\"Mississippi\",\"Alabama\",\"Illinois\",\"Pennsylvania\",\"Indiana\",\"New Hampshire\"],\"html\":true,\"align\":\"left\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"rank\",\"name\":\"Rank\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"prop_coastline\",\"name\":\"% coastline\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"100.0%\",\"82.7%\",\"74.1%\",\"70.2%\",\"47.5%\",\"42.3%\",\"41.1%\",\"35.5%\",\"35.4%\",\"33.4%\",\"32.6%\",\"31.9%\",\"30.8%\",\"30.3%\",\"28.2%\",\"26.5%\",\"24.4%\",\"22.6%\",\"21.4%\",\"20.4%\",\"18.6%\",\"14.9%\",\"9.8%\",\"9.4%\",\"7.3%\",\"5.3%\",\"5.1%\",\"4.7%\",\"4.5%\",\"3.7%\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"border_length_miles\",\"name\":\"Border length (miles)\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"671\",\"7,065\",\"1,849\",\"1,551\",\"449\",\"2,011\",\"555\",\"1,123\",\"1,333\",\"1,117\",\"1,279\",\"254\",\"317\",\"821\",\"875\",\"151\",\"769\",\"1,234\",\"1,349\",\"1,327\",\"879\",\"2,728\",\"1,520\",\"1,061\",\"1,002\",\"1,012\",\"1,120\",\"928\",\"883\",\"481\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"coastline_length_miles\",\"name\":\"Coastline length (miles)\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"671\",\"5,839\",\"1,371\",\"1,088\",\"213\",\"850\",\"228\",\"399\",\"472\",\"373\",\"416\",\"81\",\"98\",\"248\",\"247\",\"40\",\"188\",\"279\",\"289\",\"271\",\"163\",\"407\",\"150\",\"100\",\"73\",\"54\",\"57\",\"44\",\"40\",\"18\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}}],\"defaultPageSize\":16,\"showPageSizeOptions\":false,\"pageSizeOptions\":[10,25,50,100],\"paginationType\":\"numbers\",\"showPagination\":true,\"showPageInfo\":true,\"minRows\":1,\"highlight\":true,\"compact\":true,\"height\":\"auto\",\"theme\":{\"color\":\"#333333\",\"backgroundColor\":\"#FFFFFF\",\"stripedColor\":\"rgba(128,128,128,0.05)\",\"style\":{\"fontFamily\":\"'Libre Franklin', system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif\"},\"tableStyle\":{\"borderTopStyle\":\"solid\",\"borderTopWidth\":\"2px\",\"borderTopColor\":\"#D3D3D3\"},\"headerStyle\":{\"borderBottomStyle\":\"solid\",\"borderBottomWidth\":\"2px\",\"borderBottomColor\":\"#D3D3D3\"}},\"elementId\":\"zygvtosryq\",\"dataKey\":\"e6237b8a1f0f0b084170827cc65b6325\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[\"tag.attribs.columns.0.style\",\"tag.attribs.columns.1.style\",\"tag.attribs.columns.2.style\",\"tag.attribs.columns.3.style\",\"tag.attribs.columns.4.style\"],\"jsHooks\":[]}</script>\n</div>\n```\n\n:::\n:::\n\n```{=html}\n<hr class=\"dinkus\">\n```\n\n\n\nWe'll make one more table to make it easier to compare the rankings and proportions for the different resolutions.^[[Wikipedia has a similar table](https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_coastline) with different rankings based on different maps and projections and resolutions, though they don't rank the coast-to-border proportion like we've been doing.] (These columns are sortable, by the way.)\n\n\n\n::: {.cell .column-page layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\ntbl_10 <- coastline_length_by_state_ne |> \n  select(\n    name, rank_10 = rank, prop_coastline_10 = prop_coastline,\n    border_length_10 = border_length_miles, coastline_length_10 = coastline_length_miles\n  )\n\ntbl_110 <- coastline_length_by_state_ne_110 |> \n  select(\n    name, rank_110 = rank, prop_coastline_110 = prop_coastline,\n    border_length_110 = border_length_miles, coastline_length_110 = coastline_length_miles\n  )\n\ntbl_10 |> \n  left_join(tbl_110, by = join_by(name)) |> \n  mutate(across(contains(\"length\"), ~as.numeric(.))) |> \n  arrange(rank_10) |> \n  gt() |> \n  cols_label(\n    name ~ \"State\", \n    rank_10 ~ \"Rank\",\n    rank_110 ~ \"Rank\",\n    prop_coastline_10 ~ \"% coastline\",\n    prop_coastline_110 ~ \"% coastline\",\n    border_length_10 ~ \"Border length (miles)\",\n    border_length_110 ~ \"Border length (miles)\",\n    coastline_length_10 ~ \"Coastline length (miles)\",\n    coastline_length_110 ~ \"Coastline length (miles)\"\n  ) |> \n  sub_missing() |> \n  tab_spanner(\n    label = \"High resolution (1:10 million)\",\n    columns = ends_with(\"_10\")\n  ) |> \n  tab_spanner(\n    label = \"Low resolution (1:110 million)\",\n    columns = ends_with(\"_110\")\n  ) |> \n  fmt_percent(\n    columns = starts_with(\"prop_\"),\n    decimals = 1\n  ) |> \n  fmt_number(\n    columns = contains(\"length\"),\n    decimals = 0\n  ) |> \n  opt_interactive(use_pagination = FALSE, use_compact_mode = TRUE, use_highlight = TRUE) |> \n  opt_table_font(\"Libre Franklin\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"xtikoewunj\" class=\".gt_table\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#xtikoewunj table {\n  font-family: 'Libre Franklin', system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#xtikoewunj thead, #xtikoewunj tbody, #xtikoewunj tfoot, #xtikoewunj tr, #xtikoewunj td, #xtikoewunj th {\n  border-style: none;\n}\n\n#xtikoewunj p {\n  margin: 0;\n  padding: 0;\n}\n\n#xtikoewunj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#xtikoewunj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#xtikoewunj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#xtikoewunj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#xtikoewunj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#xtikoewunj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#xtikoewunj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#xtikoewunj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#xtikoewunj .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#xtikoewunj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#xtikoewunj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#xtikoewunj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#xtikoewunj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#xtikoewunj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#xtikoewunj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xtikoewunj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#xtikoewunj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#xtikoewunj .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#xtikoewunj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xtikoewunj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#xtikoewunj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xtikoewunj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#xtikoewunj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xtikoewunj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xtikoewunj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xtikoewunj .gt_left {\n  text-align: left;\n}\n\n#xtikoewunj .gt_center {\n  text-align: center;\n}\n\n#xtikoewunj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#xtikoewunj .gt_font_normal {\n  font-weight: normal;\n}\n\n#xtikoewunj .gt_font_bold {\n  font-weight: bold;\n}\n\n#xtikoewunj .gt_font_italic {\n  font-style: italic;\n}\n\n#xtikoewunj .gt_super {\n  font-size: 65%;\n}\n\n#xtikoewunj .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#xtikoewunj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#xtikoewunj .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#xtikoewunj .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#xtikoewunj .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#xtikoewunj .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#xtikoewunj .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#xtikoewunj .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#xtikoewunj div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<div id=\"xtikoewunj\" class=\"reactable html-widget\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"xtikoewunj\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"name\":[\"Hawaii\",\"Alaska\",\"Florida\",\"Michigan\",\"New Jersey\",\"Washington\",\"Louisiana\",\"Massachusetts\",\"Maryland\",\"Rhode Island\",\"North Carolina\",\"Maine\",\"New York\",\"California\",\"Delaware\",\"Virginia\",\"Wisconsin\",\"South Carolina\",\"Connecticut\",\"Texas\",\"Oregon\",\"Georgia\",\"Ohio\",\"District of Columbia\",\"Alabama\",\"Mississippi\",\"Minnesota\",\"Pennsylvania\",\"Illinois\",\"Indiana\",\"New Hampshire\"],\"rank_10\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],\"prop_coastline_10\":[1.00000002305719,0.950356743835664,0.866168192243435,0.830979983940767,0.728816503449743,0.662152795310262,0.654314581445184,0.654108863415661,0.651446703084627,0.637147952416471,0.634047014369978,0.62340643184199,0.593173451960401,0.590058431541649,0.511361993061225,0.505330354491681,0.451669337880791,0.447885940985075,0.378139483577159,0.372858710272812,0.32946858227647,0.234051531206005,0.230535075884157,0.222097678934753,0.182423646280105,0.145388849315363,0.0940002244112465,0.086326481085529,0.0478578044572803,0.0416353715802241,0.0376899575172537],\"border_length_10\":[906.521886547635,24866.234473789,3458.36073177283,2752.32413875135,665.766399521454,2431.96179010171,2237.82207853154,954.049030861188,1733.0905012548,302.971423449822,2544.57301885066,1677.04565289963,1998.40034151875,2886.95130942461,296.33200227838,2062.13873186231,1370.80550447945,1091.85454262226,356.162508399253,4068.22109594084,1537.6350636342,1302.59642649316,999.983576641033,36.7733271116633,1180.66135054376,1184.30972223058,1604.67088013519,957.47472629315,1200.85938547766,987.018260921426,491.715226799401],\"coastline_length_10\":[906.521907449481,23631.7936259643,2995.52206316535,2287.12626861938,485.221539413551,1610.3302974036,1464.23961666316,624.051927219425,1129.01609318972,193.037622091758,1613.37892544867,1045.48104651028,1185.39802897752,1703.4699615762,151.532923292896,1042.061296383,619.150814571575,489.026299241198,134.679106995639,1516.87167093715,506.602444474149,304.874688164196,230.531289723851,8.16727059820884,215.380548588185,172.185427748101,150.8394228389,82.6554238492177,57.4704936508795,41.0948720499302,18.5327260086562],\"rank_110\":[1,2,4,3,5,11,10,7,15,16,18,14,9,6,12,20,8,17,13,22,19,24,21,\"NA\",26,25,23,28,27,29,30],\"prop_coastline_110\":[1,0.826578721839132,0.70154802868831,0.741230447949974,0.47529559334139,0.3256024347498,0.333777372096147,0.410708306434224,0.282171574916153,0.264742634974663,0.226048378695959,0.302629334295,0.354279041306692,0.422559323559038,0.318664195896749,0.204011190556984,0.355180351974834,0.2442815493506,0.307550772932554,0.149331287408419,0.213948321352267,0.0937730536615907,0.185691532669522,\"NA\",0.053049660810459,0.0726300736282431,0.098464687558646,0.0471220896703173,0.0512965303125375,0.0453829546186212,0.0372701159213773],\"border_length_110\":[671.224472430645,7064.61261206206,1551.13037089299,1849.39945636081,448.648412783552,1279.1308138037,1116.88549171443,555.355988652821,874.6238483293,150.636228561968,1234.43700410869,820.759060979213,1332.53491833872,2010.55600171779,253.70004201216,1326.68665688154,1122.82629692482,768.685653920999,317.318368579482,2728.3798092644,1349.35360041347,1061.42620470295,878.659060461396,\"NA\",1011.52143734185,1001.67418972791,1520.30264933558,928.16767640141,1120.21615370549,882.92776157891,480.967167884413],\"coastline_length_110\":[671.224472430645,5839.45846316687,1088.19245393855,1370.83118747676,213.240613555631,416.488107337978,372.791104356756,228.089317567704,246.793988742305,39.8798320721412,279.042483381066,248.385768240728,472.089193376734,849.579184063431,80.8451198867764,270.658924366469,398.805839348358,187.775722503401,97.5915095223168,407.43246945659,288.6919377191,99.5331764514286,163.159547631039,\"NA\",53.6608691534929,72.7516701514489,149.69612536141,43.7372004764773,57.4632018851479,40.0698705352565,17.9257021014286]},\"columns\":[{\"id\":\"name\",\"name\":\"State\",\"type\":\"character\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"Hawaii\",\"Alaska\",\"Florida\",\"Michigan\",\"New Jersey\",\"Washington\",\"Louisiana\",\"Massachusetts\",\"Maryland\",\"Rhode Island\",\"North Carolina\",\"Maine\",\"New York\",\"California\",\"Delaware\",\"Virginia\",\"Wisconsin\",\"South Carolina\",\"Connecticut\",\"Texas\",\"Oregon\",\"Georgia\",\"Ohio\",\"District of Columbia\",\"Alabama\",\"Mississippi\",\"Minnesota\",\"Pennsylvania\",\"Illinois\",\"Indiana\",\"New Hampshire\"],\"html\":true,\"align\":\"left\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"rank_10\",\"name\":\"Rank\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"prop_coastline_10\",\"name\":\"% coastline\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"100.0%\",\"95.0%\",\"86.6%\",\"83.1%\",\"72.9%\",\"66.2%\",\"65.4%\",\"65.4%\",\"65.1%\",\"63.7%\",\"63.4%\",\"62.3%\",\"59.3%\",\"59.0%\",\"51.1%\",\"50.5%\",\"45.2%\",\"44.8%\",\"37.8%\",\"37.3%\",\"32.9%\",\"23.4%\",\"23.1%\",\"22.2%\",\"18.2%\",\"14.5%\",\"9.4%\",\"8.6%\",\"4.8%\",\"4.2%\",\"3.8%\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"border_length_10\",\"name\":\"Border length (miles)\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"907\",\"24,866\",\"3,458\",\"2,752\",\"666\",\"2,432\",\"2,238\",\"954\",\"1,733\",\"303\",\"2,545\",\"1,677\",\"1,998\",\"2,887\",\"296\",\"2,062\",\"1,371\",\"1,092\",\"356\",\"4,068\",\"1,538\",\"1,303\",\"1,000\",\"37\",\"1,181\",\"1,184\",\"1,605\",\"957\",\"1,201\",\"987\",\"492\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"coastline_length_10\",\"name\":\"Coastline length (miles)\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"907\",\"23,632\",\"2,996\",\"2,287\",\"485\",\"1,610\",\"1,464\",\"624\",\"1,129\",\"193\",\"1,613\",\"1,045\",\"1,185\",\"1,703\",\"152\",\"1,042\",\"619\",\"489\",\"135\",\"1,517\",\"507\",\"305\",\"231\",\"8\",\"215\",\"172\",\"151\",\"83\",\"57\",\"41\",\"19\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"rank_110\",\"name\":\"Rank\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"1\",\"2\",\"4\",\"3\",\"5\",\"11\",\"10\",\"7\",\"15\",\"16\",\"18\",\"14\",\"9\",\"6\",\"12\",\"20\",\"8\",\"17\",\"13\",\"22\",\"19\",\"24\",\"21\",\"—\",\"26\",\"25\",\"23\",\"28\",\"27\",\"29\",\"30\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"prop_coastline_110\",\"name\":\"% coastline\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"100.0%\",\"82.7%\",\"70.2%\",\"74.1%\",\"47.5%\",\"32.6%\",\"33.4%\",\"41.1%\",\"28.2%\",\"26.5%\",\"22.6%\",\"30.3%\",\"35.4%\",\"42.3%\",\"31.9%\",\"20.4%\",\"35.5%\",\"24.4%\",\"30.8%\",\"14.9%\",\"21.4%\",\"9.4%\",\"18.6%\",\"—\",\"5.3%\",\"7.3%\",\"9.8%\",\"4.7%\",\"5.1%\",\"4.5%\",\"3.7%\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"border_length_110\",\"name\":\"Border length (miles)\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"671\",\"7,065\",\"1,551\",\"1,849\",\"449\",\"1,279\",\"1,117\",\"555\",\"875\",\"151\",\"1,234\",\"821\",\"1,333\",\"2,011\",\"254\",\"1,327\",\"1,123\",\"769\",\"317\",\"2,728\",\"1,349\",\"1,061\",\"879\",\"—\",\"1,012\",\"1,002\",\"1,520\",\"928\",\"1,120\",\"883\",\"481\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}},{\"id\":\"coastline_length_110\",\"name\":\"Coastline length (miles)\",\"type\":\"numeric\",\"minWidth\":125,\"style\":\"function(rowInfo, colInfo) {\\nconst rowIndex = rowInfo.index + 1\\n}\",\"cell\":[\"671\",\"5,839\",\"1,088\",\"1,371\",\"213\",\"416\",\"373\",\"228\",\"247\",\"40\",\"279\",\"248\",\"472\",\"850\",\"81\",\"271\",\"399\",\"188\",\"98\",\"407\",\"289\",\"100\",\"163\",\"—\",\"54\",\"73\",\"150\",\"44\",\"57\",\"40\",\"18\"],\"html\":true,\"align\":\"right\",\"headerStyle\":{\"font-weight\":\"normal\"}}],\"columnGroups\":[{\"name\":\"High resolution (1:10 million)\",\"header\":\"High resolution (1:10 million)\",\"html\":true,\"headerStyle\":{\"fontWeight\":\"normal\",\"borderBottomStyle\":\"solid\",\"borderBottomWidth\":\"2px\",\"borderBottomColor\":\"#D3D3D3\",\"borderLeftStyle\":\"solid\",\"borderLeftWidth\":\"4px\",\"borderLeftColor\":\"transparent\",\"borderRightStyle\":\"solid\",\"borderRightWidth\":\"4px\",\"borderRightColor\":\"transparent\"},\"columns\":[\"rank_10\",\"prop_coastline_10\",\"border_length_10\",\"coastline_length_10\"]},{\"name\":\"Low resolution (1:110 million)\",\"header\":\"Low resolution (1:110 million)\",\"html\":true,\"headerStyle\":{\"fontWeight\":\"normal\",\"borderBottomStyle\":\"solid\",\"borderBottomWidth\":\"2px\",\"borderBottomColor\":\"#D3D3D3\",\"borderLeftStyle\":\"solid\",\"borderLeftWidth\":\"4px\",\"borderLeftColor\":\"transparent\",\"borderRightStyle\":\"solid\",\"borderRightWidth\":\"4px\",\"borderRightColor\":\"transparent\"},\"columns\":[\"rank_110\",\"prop_coastline_110\",\"border_length_110\",\"coastline_length_110\"]}],\"pagination\":false,\"defaultPageSize\":10,\"showPageSizeOptions\":false,\"pageSizeOptions\":[10,25,50,100],\"paginationType\":\"numbers\",\"showPagination\":false,\"showPageInfo\":true,\"minRows\":1,\"highlight\":true,\"compact\":true,\"height\":\"auto\",\"theme\":{\"color\":\"#333333\",\"backgroundColor\":\"#FFFFFF\",\"stripedColor\":\"rgba(128,128,128,0.05)\",\"style\":{\"fontFamily\":\"'Libre Franklin', system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif\"},\"tableStyle\":{\"borderTopStyle\":\"solid\",\"borderTopWidth\":\"2px\",\"borderTopColor\":\"#D3D3D3\"},\"headerStyle\":{\"borderBottomStyle\":\"solid\",\"borderBottomWidth\":\"2px\",\"borderBottomColor\":\"#D3D3D3\"}},\"elementId\":\"xtikoewunj\",\"dataKey\":\"3ad99a13b22293a043d71e78100781fb\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[\"tag.attribs.columns.0.style\",\"tag.attribs.columns.1.style\",\"tag.attribs.columns.2.style\",\"tag.attribs.columns.3.style\",\"tag.attribs.columns.4.style\",\"tag.attribs.columns.5.style\",\"tag.attribs.columns.6.style\",\"tag.attribs.columns.7.style\",\"tag.attribs.columns.8.style\"],\"jsHooks\":[]}</script>\n</div>\n```\n\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../../../../site_libs/core-js-2.5.3/shim.min.js\"></script>\n<script src=\"../../../../../site_libs/react-18.2.0/react.min.js\"></script>\n<script src=\"../../../../../site_libs/react-18.2.0/react-dom.min.js\"></script>\n<script src=\"../../../../../site_libs/reactwidget-1.0.0/react-tools.js\"></script>\n<script src=\"../../../../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../../../../../site_libs/reactable-0.4.4/reactable.css\" rel=\"stylesheet\" />\n<script src=\"../../../../../site_libs/reactable-binding-0.4.4/reactable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}